## B+ Tree



## B+ VS B-



## Bulk Load



## cluster index

聚类索引leaf node储存是不是sequential的,即在disk上是连续的

事实上InnoDB的索引是聚簇索引，主键索引叶子为真实数据, 二级索引叶子为主键
postgresql以及本项目的索引为非聚簇索引，主键和二级索引没有区别，叶子结点都为RID(page_id+slot_num)

相关资料:

https://stackoverflow.com/questions/63227402/mysqlindexes-and-order-of-rows-in-a-table



## Index的page

在db中,万物皆存在page中。



## BUGS

### template匹配问题

### 对于一个template class 所有的method都是template的



## Debug 

```c++
// 用vscode时，所有命令前要加 -exec
-exec p *(std::pair<bustub::GenericKey<8>, bustub::RID>(*)[5])array_
-exec parray *(std::pair<bustub::GenericKey<8>, bustub::RID>(*)[5])array_
  
//print tree in lldb 
//https://stackoverflow.com/questions/34278238/print-string-with-newlines-with-lldb
setting set escape-non-printables false
print DrawBPlusTree()
  

//print一个变量
  
p page->array_[2].first.ToString()
 
  
```

## PageGuard/Page/Page data/Node 之间的联系



## clustered index 与 non-clustered index

### 存储的对象不同

### 在disk中存储的方式不同(尤其是mysql)

## Insert

leaf nodes和 internal nodes split的时机时不一样的

**Leaf Nodes**

**Internal Nodes**







## Delete



leaf nodes 和internal nodes underfull的判断是不一样的。

**Leaf Nodes**

**Internal Nodes**











